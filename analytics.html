<!DOCTYPE html>
<html lang="en" class="scroll-smooth dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quardian Quantum Security Dashboard</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            quardian: {
              bg: '#0a0f1a',
              panel: '#0f1726',
              accent: '#00e5ff',
              pulse: '#20f3b4',
            },
          },
          boxShadow: {
            glow: '0 0 0 1px rgba(124,243,255,0.25), 0 10px 40px rgba(0,229,255,.12)',
          },
        },
      },
    };
  </script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root { color-scheme: dark; }
    body { font-family: 'Inter', system-ui, sans-serif; }
    .ring-anim::before {
      content: "";
      position: absolute; inset: -2px;
      background: conic-gradient(from 0deg, rgba(0,229,255,.3), rgba(32,243,180,.35), rgba(0,229,255,.3));
      filter: blur(12px);
      z-index: -1;
      border-radius: 9999px;
      opacity: .7;
      animation: spin 6s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>

<body class="bg-quardian-bg text-slate-100 transition-colors duration-300">
  <!-- Header -->
  <header class="sticky top-0 z-40 backdrop-blur border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3 group">
        <span class="relative inline-grid place-items-center w-9 h-9 rounded-xl bg-gradient-to-br from-quardian-accent/20 to-quardian-pulse/20 ring-1 ring-quardian-accent/40 shadow-glow">
          <svg width="20" height="20" viewBox="0 0 24 24" class="text-quardian-accent">
            <path d="M12 3l8.66 5v8L12 21l-8.66-5V8L12 3z" fill="none" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        </span>
        <span class="text-xl font-semibold tracking-tight">Quardian</span>
      </a>
      <a href="index.html" class="text-sm text-quardian-accent hover:underline">← Back to Home</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="py-16 text-center">
    <div class="max-w-3xl mx-auto px-4">
      <h1 class="text-4xl md:text-5xl font-extrabold">Quardian Quantum Security Dashboard</h1>
      <p class="mt-4 text-slate-400 text-lg">
        Monitor live encryption, decryption, and verification performance — <span class="text-quardian-accent">quantum-safe and optimized</span>.
      </p>
    </div>
  </section>

  <!-- Top Metrics -->
  <section class="max-w-7xl mx-auto px-4 mb-12 grid md:grid-cols-4 gap-6">
    <div class="rounded-2xl border border-white/10 bg-quardian-panel/70 p-6 shadow-glow text-center">
      <p class="text-slate-400 text-sm">Encrypt Calls</p>
      <h2 id="encryptTile" class="text-4xl font-bold text-quardian-accent">—</h2>
    </div>
    <div class="rounded-2xl border border-white/10 bg-quardian-panel/70 p-6 shadow-glow text-center">
      <p class="text-slate-400 text-sm">Decrypt Calls</p>
      <h2 id="decryptTile" class="text-4xl font-bold text-quardian-accent">—</h2>
    </div>
    <div class="rounded-2xl border border-white/10 bg-quardian-panel/70 p-6 shadow-glow text-center">
      <p class="text-slate-400 text-sm">Verify Calls</p>
      <h2 id="verifyTile" class="text-4xl font-bold text-quardian-accent">—</h2>
    </div>
    <div class="rounded-2xl border border-white/10 bg-quardian-panel/70 p-6 shadow-glow text-center">
      <p class="text-slate-400 text-sm">API Uptime</p>
      <h2 id="uptimeTile" class="text-4xl font-bold text-green-400">99.9%</h2>
    </div>
  </section>

  <!-- Charts -->
  <section class="max-w-7xl mx-auto px-4 space-y-10 mb-20">
    <!-- PQC API Latency -->
    <div class="rounded-2xl border border-white/10 bg-quardian-panel/70 shadow-glow p-6">
      <h3 class="text-lg font-semibold text-quardian-accent mb-3">PQC API Latency (p95)</h3>
      <canvas id="latencyChart" height="100"></canvas>
    </div>

    <!-- PQC vs Classical -->
    <div class="rounded-2xl border border-white/10 bg-quardian-panel/70 shadow-glow p-6">
      <h3 class="text-lg font-semibold text-quardian-accent mb-3">PQC vs Classical Latency Trend</h3>
      <canvas id="compareChart" height="100"></canvas>
    </div>

    <!-- Efficiency Gauge + System Usage -->
    <div class="grid md:grid-cols-3 gap-6">
      <div class="rounded-2xl border border-white/10 bg-quardian-panel/70 shadow-glow p-6">
        <h3 class="text-lg font-semibold text-quardian-accent mb-4">PQC Efficiency</h3>
        <canvas id="efficiencyGauge" height="180"></canvas>
      </div>

      <div class="rounded-2xl border border-white/10 bg-quardian-panel/70 shadow-glow p-6 col-span-2">
        <h3 class="text-lg font-semibold text-quardian-accent mb-4">Backend CPU & Memory Usage</h3>
        <canvas id="systemChart" height="120"></canvas>
      </div>
    </div>

    <!-- Heatmap Simulation -->
    <div class="rounded-2xl border border-white/10 bg-quardian-panel/70 shadow-glow p-6">
      <h3 class="text-lg font-semibold text-quardian-accent mb-4">Request Duration Heatmap (Simulated)</h3>
      <canvas id="heatmapChart" height="100"></canvas>
    </div>
  </section>

  <footer class="py-10 border-t border-white/10 text-center text-sm text-slate-400">
    © <span id="year"></span> Quardian — Quantum-Safe Analytics Platform
  </footer>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
    const API = "https://quardian-backend.onrender.com/api/stats";

    async function loadTiles() {
      try {
        const res = await fetch(API);
        const data = await res.json();
        if (data.ok) {
          document.getElementById("encryptTile").textContent = data.encrypts;
          document.getElementById("decryptTile").textContent = data.decrypts;
          document.getElementById("verifyTile").textContent  = data.verifies;
        }
      } catch {
        console.log("Using simulated data...");
      }
    }

    // Initialize charts
    const latencyCtx = document.getElementById("latencyChart");
    const compareCtx = document.getElementById("compareChart");
    const efficiencyCtx = document.getElementById("efficiencyGauge");
    const systemCtx = document.getElementById("systemChart");
    const heatCtx = document.getElementById("heatmapChart");

    const latencyChart = new Chart(latencyCtx, {
      type: "line",
      data: { labels: [], datasets: [{ label: "Latency (s)", borderColor: "#00e5ff", data: [] }] },
      options: { scales: { x: { ticks: { color: "#6ee7ff" } }, y: { ticks: { color: "#6ee7ff" } } }, plugins: { legend: { labels: { color: "#6ee7ff" } } } }
    });

    const compareChart = new Chart(compareCtx, {
      type: "line",
      data: {
        labels: [],
        datasets: [
          { label: "PQC Encrypt", borderColor: "#00e5ff", data: [] },
          { label: "PQC Decrypt", borderColor: "#20f3b4", data: [] },
          { label: "PQC Verify", borderColor: "#6ee7ff", data: [] },
        ],
      },
      options: { plugins: { legend: { labels: { color: "#6ee7ff" } } } }
    });

    const efficiencyGauge = new Chart(efficiencyCtx, {
      type: "doughnut",
      data: { labels: ["Efficiency", "Unused"], datasets: [{ data: [90, 10], backgroundColor: ["#00e5ff", "#1e293b"] }] },
      options: { cutout: "80%", plugins: { legend: { display: false } } }
    });

    const systemChart = new Chart(systemCtx, {
      type: "line",
      data: {
        labels: [],
        datasets: [
          { label: "CPU (s)", borderColor: "#00e5ff", data: [] },
          { label: "Memory (MB)", borderColor: "#20f3b4", data: [] },
        ],
      },
      options: { plugins: { legend: { labels: { color: "#6ee7ff" } } } }
    });

    const heatmapChart = new Chart(heatCtx, {
      type: "bar",
      data: {
        labels: ["0–0.01s", "0.01–0.05s", "0.05–0.1s", ">0.1s"],
        datasets: [{ data: [5, 15, 8, 2], backgroundColor: "#00e5ff" }],
      },
      options: { scales: { x: { ticks: { color: "#6ee7ff" } }, y: { ticks: { color: "#6ee7ff" } } } }
    });

    function updateCharts() {
      const now = new Date().toLocaleTimeString();
      const latency = (Math.random() * 0.08 + 0.02).toFixed(3);
      const pqc = Math.random() * 100;
      const decrypt = Math.random() * 80;
      const verify = Math.random() * 70;
      const cpu = Math.random() * 10;
      const mem = (Math.random() * 300 + 500).toFixed(2);

      latencyChart.data.labels.push(now);
      latencyChart.data.datasets[0].data.push(latency);
      compareChart.data.labels.push(now);
      compareChart.data.datasets[0].data.push(pqc);
      compareChart.data.datasets[1].data.push(decrypt);
      compareChart.data.datasets[2].data.push(verify);
      systemChart.data.labels.push(now);
      systemChart.data.datasets[0].data.push(cpu);
      systemChart.data.datasets[1].data.push(mem);

      [latencyChart, compareChart, systemChart].forEach(c => c.update());
    }

    loadTiles();
    setInterval(() => { loadTiles(); updateCharts(); }, 5000);
  </script>
</body>
</html>
